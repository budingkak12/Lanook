# 高级搜索面板简要说明

- **入口与路由**  
  - 页面：`/search`，顶部切换“默认搜索 / 高级面板”。  
  - 直达参数：`/search?advanced=1` 或 `?tab=advanced` 自动打开高级面板。

- **整体布局**  
  - 左侧：控制区（筛选器 + 标签/排除 + 权重滑杆 + 预设卡片）。  
  - 右侧：结果区，沿用 `MediaGrid` 展示，界面主区域与默认搜索一致。

- **筛选器**  
  - 目录多选（内置 Camera/Downloads/Screenshots，支持自定义）。  
  - 媒体类型：图片 / 视频；视频可选时长分桶。  
  - 时间范围：24h / 7d / 30d / 全部。  
  - 限制最新 200 条开关（用于“最新随机”候选池）。

- **标签与排除**  
  - 偏好标签：可添加并单独调整权重。  
  - 排除标签：可多选。  
  - 内置联想来自 `getAllTags()`。

- **排序与权重滑杆**  
  - 随机度、新旧偏好、视频权重、时长偏好、标签总体加权（0–100）。

- **预设模式**  
  - 推荐 / 视频优先 / 图片浏览 / 混合随机 / 怀旧，一键写入权重参数。

- **生效与恢复**  
  - “应用并搜索”组装查询字符串传给 `MediaGrid` 的 `queryText`。  
  - “重置”恢复默认筛选与权重，并清空已应用查询。

- **文件位置**  
  - 页面入口：`webclient/app/(main)/search/page.tsx`  
  - 高级面板组件：`webclient/components/advanced-search/*`（view / filter-panel / tag-panel / weight-slider / preset-panel / config）  
  - 导出入口：`webclient/components/advanced-search-view.tsx`

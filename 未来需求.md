# 需求讨论纪要 (功能规划)

本文档简要记录了我们围绕新功能所讨论的核心设计与决策。

## 1. 核心功能：从“标签”到“智能集合”

我们的需求从一个简单的“媒体标签管理系统”演进为一个更高级的“加权媒体集合”功能。

- **最终愿景**：用户可以创建包含多个**类别（标签）**的**“集合”**，并为每个类别设置**权重**。在浏览时，系统会根据权重智能推荐一个媒体流，权重越高的类别内容出现越频繁。

## 2. 功能拆解与设计

### a. 相册 (Albums) vs. 集合 (Collections)

我们明确了这两个概念的区别，以避免功能冲突：

- **相册**（如“喜欢”、“收藏”）：**静态容器**，用于手动**归档和整理**。
- **集合**（如“夏日回忆”）：**动态规则集**，用于**智能发现和浏览**。

**UI设计**：在App中设置统一的“媒体库”入口，内部清晰地划分为“我的相册”和“我的集合”两个区域。

### b. 数据库与API设计

- **数据库**：新增 `media_collections`（定义集合）和 `collection_tags`（存储集合、标签与权重关系）两张表。
- **API**：设计了用于管理“集合”的增删改查API，以及一个核心的 `GET /browse/collection/{id}` 接口，用于获取加权随机的媒体流。

## 3. 未来规划：云服务与离线访问

为了支持PC端和移动端在任何网络下使用，我们规划了以下演进路径：

- **第一步：云端化**：将当前局域网的PC服务器迁移至云服务器，作为所有客户端的统一数据中心。
- **第二步：离线缓存（分阶段）**：
  1.  **只读缓存 (简单)**：利用图片加载库的磁盘缓存，实现“看过的内容”离线可看。
  2.  **元数据离线 (中等)**：使用本地数据库（Room）缓存媒体列表信息，实现离线浏览。
  3.  **双向同步 (困难)**：实现离线操作（如点赞）并在联网后自动同步到云端。

**建议**：优先进行**云端化改造**和实现**只读缓存**，以最低成本获得最大体验提升。